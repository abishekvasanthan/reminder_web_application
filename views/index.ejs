<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/semantic-ui@2.4.2/dist/semantic.min.css" type="text/css" />
    <link rel="stylesheet" href="/stylesheets/index.css" type="text/css" />
    <title>HomePage</title>
</head>

<body>
    <div class="ui fixed inverted menu">
        <div class="ui container">
            <div class="header item"><i class="edit icon"></i>Todo Site</div>
            <a href="/" class="item">Home</a>

            <div class="right menu">
                <% if(!currentUser){ %>
                    <div class="item">
                        <a href="/login" class="ui green basic button">Login</a>
                    </div>
                    <div class="item">
                        <a href="/register" class="ui primary button">Sign Up</a>
                    </div>
                    <% }else{ %>
                        <div class="item">
                            <button class="ui labeled icon inverted yellow  button">
                            <i class="user circle outline icon"></i>
                            <%= currentUser.username %>
                            </button>
                        </div>
                        <div class="item">
                            <a href="/logout" class="ui inverted red button">Logout</a>
                        </div>
                        <% } %>
            </div>
        </div>
    </div>
    


            <div class="ui main text container">
                <div class="ui huge header">Todos...                                                        
                    <span>
                        <a href="/todos/new" class="positive ui button right floated" >New Post</a>
                    </span>
                </div>
                <div class="ui top attached segment">
                    <div class="ui divided items">
                        <% foundUser.todos.forEach(function(todo){ %>               // todos is an array which we iterate for each todo& display
                            <div class="item">

                                <div class="content">
                                    <a class="header" href="/todos/<%= todo._id %> ">
                                        <%= todo.title %>                           //we display the title  
                                    </a>

                                    <div class="description">
                                        <p>
                                            <%= todo.body.substring(0,100) %> ....
                                        </p>
                                    </div>
                                    <div class="extra">
                                        <a class="ui floated basic violet button" href="/todos/<%= todo._id %> "> //moves to the complete todo page
                                    Read More                                                                     //which is present in show.ejs
                                    <i class="right chevron icon"></i>
                                </a>
                                        <h4 class="right floated date">
                                            <%= todo.date%>:
                                                <%= todo.time %>
                                        </h4>
                                    </div>
                                </div>
                            </div>

                            <% }); %>
                    </div>
                </div>
            </div>
</body>

</html>